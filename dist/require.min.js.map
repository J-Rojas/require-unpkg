{"version":3,"file":"require.min.js","sources":["../src/cache.js","../src/require.js"],"sourcesContent":["let localStorage\nif (typeof window === 'undefined') {\n\t//For node environment\n\tconst obj = {}\n\tlocalStorage = {\n\t\tsetItem(k, v) {\n\t\t\tobj[k] = v\n\t\t},\n\t\tgetItem(k) {\n\t\t\treturn obj[k] || null\n\t\t},\n\t\tremoveItem(k) {\n\t\t\tdelete obj[k]\n\t\t}\n\t}\n} else {\n\tlocalStorage = window.localStorage\n}\nconst ns = 'require-unpkg-cache'\nconst cache = {\n\tobj: {},\n\tset(k, v) {\n\t\tthis.obj[k] = { content: v, timestamp: Date.now() }\n\t\tlocalStorage.setItem(ns, JSON.stringify(this.obj))\n\t},\n\tget(k) {\n\t\tif (!this.has(k)) {\n\t\t\treturn null\n\t\t}\n\t\treturn this.obj[k].content\n\t},\n\thas(k) {\n\t\tif (!(k in this.obj)) {\n\t\t\treturn false\n\t\t}\n\t\tlet g = this.obj[k]\n\t\tif (Date.now() - g.timestamp < this.expire) {\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t},\n\texpire: 24 * 60 * 60 * 1000 //24hours\n}\nif (localStorage.getItem(ns)) {\n\ttry {\n\t\tcache.obj = JSON.parse(localStorage.getItem(ns))\n\t} catch (e) {\n\t\tlocalStorage.removeItem(ns)\n\t}\n}\n\nexport default cache\n","import cache from './cache'\n\n//internal get\nfunction _get(url) {\n\treturn new Promise((res, rej) => {\n\t\tlet xhr = new require.XMLHttpRequest()\n\n\t\txhr.open('GET', url)\n\n\t\txhr.onload = () => res(xhr.responseText)\n\t\txhr.onerror = () => rej(xhr.statusText)\n\n\t\txhr.setRequestHeader('Cache-Control', 'no-cache')\n\n\t\txhr.send()\n\t})\n}\n\n//internal require\nasync function _require(pkg) {\n\tpkg = pkg.toLowerCase()\n\tif (!cache.has(pkg)) {\n\t\tlet js = await _get(`https://unpkg.com/${pkg}?time=${Date.now()}`)\n\t\tcache.set(pkg, js)\n\t}\n\tlet module = { exports: {} }\n\tlet code = new Function(['module', 'exports'], cache.get(pkg))\n\tcode.apply(null, [module, module.exports])\n\treturn module.exports\n}\n\n/**\n * require module from unpkg.com\n * @function require\n * @param {String|String[]} package module name or modules name\n * @return {Promise<Object>|Promise<Object[]>} return promise with module or array of module\n */\nasync function require(pkg) {\n\tif (!Array.isArray(pkg)) return await _require(pkg)\n\telse {\n\t\tlet pms = pkg.map(p => _require(p))\n\t\treturn await Promise.all(pms)\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\trequire.XMLHttpRequest = window.XMLHttpRequest\n}\n\nrequire.cache = cache\nrequire._require = _require\nrequire._get = _get\n\nexport default require\n"],"names":["localStorage","window","obj","k","v","ns","cache","Date","now","setItem","JSON","stringify","this","has","content","g","timestamp","expire","getItem","parse","e","removeItem","_get","url","Promise","res","rej","xhr","require","XMLHttpRequest","open","onload","responseText","onerror","statusText","setRequestHeader","send","async","_require","pkg","toLowerCase","js","set","module","Function","get","apply","exports","Array","isArray","pms","map","p","all"],"mappings":"mLAAA,IAAIA,EACJ,GAAsB,oBAAXC,OAAwB,OAE5BC,gBAEGC,EAAGC,KACND,GAAKC,WAEFD,GACAD,EAAIC,IAAM,gBAEPA,UACHD,EAAIC,YAIEF,OAAOD,aAEvB,MAAMK,EAAK,sBACLC,cAEDH,EAAGC,QACDF,IAAIC,YAAgBC,YAAcG,KAAKC,SAC/BC,QAAQJ,EAAIK,KAAKC,UAAUC,KAAKV,WAE1CC,UACES,KAAKC,IAAIV,GAGPS,KAAKV,IAAIC,GAAGW,QAFX,UAILX,QACGA,KAAKS,KAAKV,YACR,MAEJa,EAAIH,KAAKV,IAAIC,UACbI,KAAKC,MAAQO,EAAEC,UAAYJ,KAAKK,eAK7B,OAET,GAAIjB,EAAakB,QAAQb,SAEjBH,IAAMQ,KAAKS,MAAMnB,EAAakB,QAAQb,IAC3C,MAAOe,KACKC,WAAWhB,GC5C1B,SAASiB,EAAKC,UACN,IAAIC,QAAQ,CAACC,EAAKC,SACpBC,EAAM,IAAIC,EAAQC,iBAElBC,KAAK,MAAOP,KAEZQ,OAAS,KAAMN,EAAIE,EAAIK,iBACvBC,QAAU,KAAMP,EAAIC,EAAIO,eAExBC,iBAAiB,gBAAiB,cAElCC,SAKNC,eAAeC,EAASC,QACjBA,EAAIC,eACLlC,EAAMO,IAAI0B,GAAM,KAChBE,QAAWnB,uBAA0BiB,UAAYhC,KAAKC,WACpDkC,IAAIH,EAAKE,OAEZE,sBACO,IAAIC,UAAU,SAAU,WAAYtC,EAAMuC,IAAIN,IACpDO,MAAM,MAAOH,EAAQA,EAAOI,UAC1BJ,EAAOI,QASfV,eAAeT,EAAQW,MACjBS,MAAMC,QAAQV,GACd,KACAW,EAAMX,EAAIY,IAAIC,GAAKd,EAASc,iBACnB5B,QAAQ6B,IAAIH,GAHD,aAAaZ,EAASC,SAO1B,oBAAXtC,WACF4B,eAAiB5B,OAAO4B,gBAGjCD,EAAQtB,MAAQA,EAChBsB,EAAQU,SAAWA,EACnBV,EAAQN,KAAOA"}